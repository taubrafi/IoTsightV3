<!DOCTYPE html>
<!-- saved from url=(0048)http://forum.arduino.cc/index.php?topic=408300.0 -->
<html class=" js flexbox flexboxlegacy canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<link rel="stylesheet" type="text/css" href="./Abnormal Raw Data from HMC5883L_files/index.css">
	<link rel="stylesheet" type="text/css" href="./Abnormal Raw Data from HMC5883L_files/responsive.css">
	<link rel="stylesheet" type="text/css" href="./Abnormal Raw Data from HMC5883L_files/jquery.sceditor.css">
	<style>
img.avatar { max-width: 65px; max-height: 65px; }</style>
	<script type="text/javascript" async="" src="./Abnormal Raw Data from HMC5883L_files/ga.js"></script><script><!-- // --><![CDATA[
		var smf_theme_url = "http://forum.arduino.cc/Themes/default";
		var smf_default_theme_url = "http://forum.arduino.cc/Themes/default";
		var smf_images_url = "http://forum.arduino.cc/Themes/default/images";
		var smf_smileys_url = "http://forum.arduino.cc/Smileys";
		var smf_scripturl = "http://forum.arduino.cc/index.php";
		var smf_iso_case_folding = false;
		var smf_charset = "UTF-8";
		var smf_session_id = "cc29f10e73a442e4b44a697c83f9a18d";
		var smf_session_var = "de75116";
		var smf_member_id;
		var ajax_notification_text = 'Loading...';
		var help_popup_heading_text = 'A little lost? Let me explain:';
	// ]]></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/jquery.min.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/smf_jquery_plugins.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/script.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/theme.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/editor.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/jquery.sceditor.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/jquery.sceditor.bbcode.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/jquery.sceditor.smf.js"></script>
	<script src="./Abnormal Raw Data from HMC5883L_files/topic.js"></script>
	<script><!-- // --><![CDATA[
		var smf_smileys_url = 'http://forum.arduino.cc/Smileys/arduino';
		var bbc_quote_from = 'Quote from';
		var bbc_quote = 'Quote';
		var bbc_search_on = 'on';
	// ]]></script>
	<meta name="description" content="Abnormal Raw Data from HMC5883L">
	<title>Abnormal Raw Data from HMC5883L</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#557EA0">
	<link rel="canonical" href="http://forum.arduino.cc/index.php?topic=408300.0">
	<link rel="help" href="http://forum.arduino.cc/index.php?action=help">
	<link rel="contents" href="http://forum.arduino.cc/index.php">
	<link rel="search" href="http://forum.arduino.cc/index.php?action=search">
	<link rel="alternate" type="application/rss+xml" title="Arduino Forum - RSS" href="http://forum.arduino.cc/index.php?type=rss2;action=.xml">
	<link rel="alternate" type="application/rss+xml" title="Arduino Forum - Atom" href="http://forum.arduino.cc/index.php?type=atom;action=.xml">
	<link rel="index" href="http://forum.arduino.cc/index.php?board=10.0">
</head>
<body id="chrome" class="action_messageindex board_10 hasGoogleVoiceExt" style="padding-top: 0px;"><link rel="stylesheet" href="./Abnormal Raw Data from HMC5883L_files/foundation2.css" type="text/css"><link rel="stylesheet" href="./Abnormal Raw Data from HMC5883L_files/common-hacked.css" type="text/css"><link rel="stylesheet" href="./Abnormal Raw Data from HMC5883L_files/new_style.css" type="text/css"><link rel="stylesheet" href="./Abnormal Raw Data from HMC5883L_files/fonts.css" type="text/css"><link rel="stylesheet" href="./Abnormal Raw Data from HMC5883L_files/arduino-icons.css" type="text/css">
<script>
  var userAgent = (navigator.userAgent || navigator.vendor || window.opera).toLowerCase();
  if(userAgent.indexOf('mac')>0){
    $("head").append('<style type="text/css">@-moz-document url-prefix() {h1 a, h2 a, h3 a, h4 a, h5 a, h1 a:hover, h2 a:hover, th a, th a:hover, h3 a:hover, h4 a:hover, h5 a:hover, #wikitext h2 a:hover, #wikitext h3 a:hover, #wikitext h4 a:hover {padding-bottom: 0.5em!important;} #pageheader .search input{font-family: "TyponineSans Regular 18";} #pagefooter .monospace{margin-top: -4px;} #navWrapper ul.left &gt; li{margin-top: -2px; padding-bottom: 2px;}#navWrapper ul.right &gt; li{margin-top: -5px; padding-bottom: 5px;}#navWrapper ul.right &gt; li ul{margin-top: 4px;} .slider-container .fixed-caption p{padding:8px 0 14px 0}}</style>');
  }
</script>

<!--[if IE]>
<link rel='stylesheet' href='https://id.arduino.cc//css/ie-monospace.css' type='text/css' />
<![endif]-->

<div id="menuWings" class="fixed" style="display: none;"></div>
<div id="page">




<!--[if IE 8]>
<div class="alert-box panel ie8alert">
  <p><strong>Arduino.cc offers limited compatibility for Internet Explorer 8. Get a modern browser as Chrome, Firefox or Safari.</strong></p>
  <a href="" class="close">&times;</a>
</div>
<![endif]-->

<div id="pageheader">
  <div class="row">
    <div class="small-6 large-8 eight columns">
      <div class="title"><a href="http://www.arduino.cc/">Arduino</a></div>
    </div>
    <div class="small-6 large-4 four columns search">
      <div class="row collapse">
          <form method="GET" action="http://www.google.com/search">
    <div class="small-12 twelve columns">
      <i class="icon-search-2"></i>
      <input type="hidden" name="ie" value="UTF-8">
      <input type="hidden" name="oe" value="UTF-8">
      <input type="text" name="q" size="25" maxlength="255" value="" placeholder="Search the Arduino Forum">
      <input type="submit" name="btnG" value="search">
      <input type="hidden" name="domains" value="http://forum.arduino.cc">
      <input type="hidden" name="sitesearch" value="http://forum.arduino.cc">
    </div>
  </form>      </div>
    </div>
  </div>

  <!--[if gte IE 9]><!-->
  <div class="navWrapper">
  <div class="small-12">
  <div id="navWrapper" class="sticky">
  <!--[endif]-->
  <!--[if IE 8]>
    <div id="navWrapper">
  <![endif]-->
    <nav class="top-bar" data-options="is_hover:true">
      <ul class="title-area">
        <li class="name"></li>
      </ul>

      
    <section class="top-bar-section">
        <ul class="left">
          <li id="navLogo" style="display: none;">
            <a href="http://www.arduino.cc/">
              <img src="./Abnormal Raw Data from HMC5883L_files/logo_46.png" alt="userpicture">
            </a>
          </li>
          <li id="navHome" style="display: block;"><a href="http://www.arduino.cc/">Home</a></li>
          <li><a href="http://store.arduino.cc/">Buy</a></li>
          <li><a href="http://www.arduino.cc/en/Main/Software">Download</a></li>
          <li class="has-dropdown not-click"><a href="http://www.arduino.cc/en/Main/Products">Products</a>
            <ul class="dropdown"><li class="title back js-generated"><h5><a href="http://forum.arduino.cc/index.php?topic=408300.0#"><span class="backArrow">Back</span></a></h5></li><li><a class="parent-link js-generated" href="http://www.arduino.cc/en/Main/Products">Products</a></li>
              <li><a href="http://www.arduino.cc/en/Main/Products">Arduino <span class="menudescription">(USA only)</span></a></li>
              <li><a href="http://www.arduino.cc/en/Main/GenuinoProducts">Genuino <span class="menudescription">(outside USA)</span></a></li>
              <li><a href="http://www.arduino.cc/en/ArduinoAtHeart/Products">AtHeart</a></li>
              <li><a href="http://www.arduino.cc/en/ArduinoCertified/Products">Certified</a></li>
            </ul>
          </li>
          <li class="has-dropdown not-click"><a href="http://forum.arduino.cc/index.php?topic=408300.0#">Learning</a>
            <ul class="dropdown"><li class="title back js-generated"><h5><a href="http://forum.arduino.cc/index.php?topic=408300.0#"><span class="backArrow">Back</span></a></h5></li>
              <li><a href="http://www.arduino.cc/en/Guide/HomePage">Getting started</a></li>
              <li><a href="http://www.arduino.cc/en/Tutorial/HomePage">Tutorials</a></li>
              <li><a href="http://www.arduino.cc/en/Reference/HomePage">Reference</a></li>
              <li><a href="http://www.arduino.cc/en/Main/CTCprogram">CTC Program</a></li>
              <li><a href="http://playground.arduino.cc/">Playground</a></li>
            </ul>
          </li>
          <li class="active"><a href="http://forum.arduino.cc/">Forum</a></li>
          <li class="has-dropdown not-click"><a href="http://forum.arduino.cc/index.php?topic=408300.0#">Support</a>
            <ul class="dropdown"><li class="title back js-generated"><h5><a href="http://forum.arduino.cc/index.php?topic=408300.0#"><span class="backArrow">Back</span></a></h5></li>
              <li><a href="http://www.arduino.cc/en/Main/FAQ">FAQ</a></li>
              <li><a href="http://www.arduino.cc/en/ContactUs">Contact Us</a></li>
            </ul>
          </li>
          <li><a href="https://blog.arduino.cc/">Blog</a></li>
        </ul>

                <ul class="right">
          <li><a href="https://id.arduino.cc/auth/login/?returnurl=https%3A%2F%2Fforum.arduino.cc%2Findex.php%3Ftopic%3D408300.0" class="cart">LOG IN</a></li>
          <li><a href="https://id.arduino.cc/auth/signup" class="cart">SIGN UP</a></li>
        </ul>
              </section></nav>
  </div>
</div>
</div>
</div>


</div>

				<div class="navigate_section" id="headerbread">
          <div class="row" style="max-width: 960px!important;">
          <div class="small-12">
					<ul>
          
						<li>
					<a href="http://forum.arduino.cc/index.php"><span>Arduino Forum</span></a>
						</li>
						<li>
							<span class="dividers"> &gt; </span>
					<a href="http://forum.arduino.cc/index.php#c2"><span>Using Arduino</span></a>
						</li>
						<li>
							<span class="dividers"> &gt; </span>
					<a href="http://forum.arduino.cc/index.php?board=10.0"><span>Sensors</span></a>
						</li>
						<li class="last">
							<span class="dividers"> &gt; </span>
					<a href="http://forum.arduino.cc/index.php?topic=408300.0"><span>Abnormal Raw Data from HMC5883L</span></a>
						</li>
					</ul>
        </div>
				</div>
				</div>
  <div class="row collapse">
  <div class="small-12 columns">
	<div id="wrapper">
    <div id="upper_section">
			<div id="inner_section">
				<div id="main_menu">
					<ul class="dropmenu sf-js-enabled sf-arrows" id="menu_nav" style="touch-action: pan-y;">
					</ul>
				</div>
			</div>
		</div>
		<div id="content_section">
			<div id="main_content_section">

			<a id="msg2809489"></a>
			<div class="pagesection top">
				
		<div class="buttonlist floatright">
			
				<a class="button-forum  button_strip_print" href="http://forum.arduino.cc/index.php?action=printpage;topic=408300.0" rel="nofollow">Print</a>
		</div>
				 <a href="http://forum.arduino.cc/index.php?topic=408300.0#bot" class="topbottom floatleft">Go Down</a>
				<div class="pagelinks floatleft">
					<span class="pages">Pages: </span><span class="current_page">[1]</span> 
				</div>
			</div>
			<div id="forumposts">
				<div class="cat_bar">
					<h3 class="catbg">
						<span id="top_subject" class="topic-icon topic-icon-">Topic: Abnormal Raw Data from HMC5883L&nbsp;<span>(Read 92 times)</span></span>
						<span class="nextlinks floatright"><a href="http://forum.arduino.cc/index.php?topic=408300.0;prev_next=prev#new">previous topic</a> - <a href="http://forum.arduino.cc/index.php?topic=408300.0;prev_next=next#new">next topic</a></span>
					</h3>
				</div>
				<form action="http://forum.arduino.cc/index.php?action=quickmod2;topic=408300.0" method="post" accept-charset="UTF-8" name="quickModForm" id="quickModForm" style="margin: 0;" onsubmit="return oQuickModify.bInEditMode ? oQuickModify.modifySave(&#39;cc29f10e73a442e4b44a697c83f9a18d&#39;, &#39;de75116&#39;) : false">
				<div class="windowbg">
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="http://forum.arduino.cc/index.php?action=profile;u=453224" title="View the profile of xmlms" class="pm_icon">xmlms</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="http://forum.arduino.cc/index.php?action=profile;u=453224"><img class="avatar" src="./Abnormal Raw Data from HMC5883L_files/default.png" alt="avatar_xmlms" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Abnormal Raw Data from HMC5883L_files/star.gif" alt="*"></li>
								<li class="postgroup">Newbie</li>
								<li class="postcount">Posts: 10</li>
								<li class="custom karma">Karma: 3&nbsp;&nbsp;<a href="http://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=453224;de75116=cc29f10e73a442e4b44a697c83f9a18d">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Abnormal Raw Data from HMC5883L_files/xx.png" alt="">
								</div>
								<div id="subject_2809489" class="subject_title"><a href="http://forum.arduino.cc/index.php?topic=408300.msg2809489#msg2809489" rel="nofollow">Abnormal Raw Data from HMC5883L</a></div>
								<div class="page_number floatright">
									 
								</div>
								<h5>
									<a href="http://forum.arduino.cc/index.php?topic=408300.msg2809489#msg2809489" rel="nofollow" title=" - Abnormal Raw Data from HMC5883L" class="smalltext">Jun 21, 2016, 09:45 am</a>
									<span class="smalltext modified" id="modified_2809489"></span>
								</h5>
								<div id="msg_2809489_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_2809489">Hi all,<br><br>I got a HMC5883L breakboard from here <br><a href="http://www.jaycar.com.au/Kits%2C-Science-%26-Learning/Science-Lab-Equipment/Specialty-Equipment/Arduino-Compatible-3-Axis-Compass-Magnetometer-Module/p/XC4496" class="bbc_link" target="_blank">http://www.jaycar.com.au/Kits%2C-Science-%26-Learning/Science-Lab-Equipment/Specialty-Equipment/Arduino-Compatible-3-Axis-Compass-Magnetometer-Module/p/XC4496</a> <br><br>I connected it to the Nano with connection SDA to A4, SCL to A5. I ran a quick test but the result looks quite weird. Despite the raw values at x and y axis seems to be ok, I could not get any useful data at the z axis. They keep jumping between 0 and -1 no matter how I rotated the board. <br><br>Can anyone give me some clue about the cause of this abnormal result? I hope this is not due to a defect inside the board.<br><br>The library I used is:<br><br><a href="https://github.com/jarzebski/Arduino-HMC5883L" class="bbc_link" target="_blank">https://github.com/jarzebski/Arduino-HMC5883L</a><br><br><br><br>The code I used to read raw data from HMC5883L is:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code" style="max-height: none; height: 200px;">#include &lt;Wire.h&gt;<br>#include &lt;HMC5883L.h&gt;<br><br>HMC5883L compass;<br><br>void setup()<br>{<br>&nbsp; Serial.begin(9600);<br>&nbsp; Serial.println("Initialize HMC5883L");<br>&nbsp; <br>&nbsp; while (!compass.begin())<br>&nbsp; {<br>&nbsp; &nbsp; Serial.println("Could not find a valid HMC5883L sensor, check wiring!");<br>&nbsp; &nbsp; delay(500);<br>&nbsp; }<br><br>&nbsp; /* Set up magetometer */<br>&nbsp; compass.setRange(HMC5883L_RANGE_1_3GA);<br>&nbsp; compass.setMeasurementMode(HMC5883L_CONTINOUS);<br>&nbsp; compass.setDataRate(HMC5883L_DATARATE_30HZ);<br>&nbsp; compass.setSamples(HMC5883L_SAMPLES_8);<br>&nbsp; compass.setOffset(0, 0);<br>}<br><br>void loop()<br>{<br>&nbsp; Vector raw = compass.readRaw();<br>&nbsp; &nbsp; Serial.print("X: ");<br>&nbsp; &nbsp; Serial.print(raw.XAxis);<br>&nbsp; &nbsp; Serial.print(", Y: ");<br>&nbsp; &nbsp; Serial.print(raw.YAxis);<br>&nbsp; &nbsp; Serial.print(", Z: ");<br>&nbsp; &nbsp; Serial.print(raw.ZAxis);<br>&nbsp; &nbsp; Serial.println();<br><br>&nbsp; delay(100);<br>}<br></code><br><br>And the result I got is like this:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code" style="max-height: none; height: 200px;">X: -410,&nbsp; Y: 50,&nbsp; &nbsp;Z: 0<br>X: -395,&nbsp; Y: 48,&nbsp; &nbsp;Z: 0<br>X: -384,&nbsp; Y: 46,&nbsp; &nbsp;Z: 0<br>X: -374,&nbsp; Y: 73,&nbsp; &nbsp;Z: -1<br>X: -367,&nbsp; Y: 111,&nbsp; Z: 0<br>X: -371,&nbsp; Y: 120,&nbsp; Z: -1<br>X: -368,&nbsp; Y: 163,&nbsp; Z: -1<br>X: -365,&nbsp; Y: 156,&nbsp; Z: 0<br>X: -345,&nbsp; Y: 170,&nbsp; Z: 1<br>X: -333,&nbsp; Y: 173,&nbsp; Z: -1<br>X: -302,&nbsp; Y: 194,&nbsp; Z: 0<br>X: -271,&nbsp; Y: 217,&nbsp; Z: 0</code><br><br><br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg2810446"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="http://forum.arduino.cc/index.php?action=profile;u=411246" title="View the profile of Koepel" class="pm_icon">Koepel</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="http://forum.arduino.cc/index.php?action=profile;u=411246"><img class="avatar" src="./Abnormal Raw Data from HMC5883L_files/Koepel.jpg" alt="avatar_Koepel" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Abnormal Raw Data from HMC5883L_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Edison Member</li>
								<li class="postcount">Posts: 1,773</li>
								<li class="custom karma">Karma: 292&nbsp;&nbsp;<a href="http://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=411246;de75116=cc29f10e73a442e4b44a697c83f9a18d">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Abnormal Raw Data from HMC5883L_files/xx.png" alt="">
								</div>
								<div id="subject_2810446" class="subject_title"><a href="http://forum.arduino.cc/index.php?topic=408300.msg2810446#msg2810446" rel="nofollow">Re: Abnormal Raw Data from HMC5883L</a></div>
								<div class="page_number floatright">
									 #1 
								</div>
								<h5>
									<a href="http://forum.arduino.cc/index.php?topic=408300.msg2810446#msg2810446" rel="nofollow" title="Reply #1 - Re: Abnormal Raw Data from HMC5883L" class="smalltext">Jun 21, 2016, 09:43 pm</a>
									<span class="smalltext modified" id="modified_2810446"></span>
								</h5>
								<div id="msg_2810446_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_2810446">Could you try a more simple sketch, or a better tutorial ?<br>Do you use 5V to power the module ? The 5V is needed because the voltage regulator on the module makes 3.3V for the magnetometer.<br>That module does not have a level shifter for I2C. I suppose it has 10k resistors to 3.3V. It might work, but it is not perfect.<br><br>Try this tutorial : <a href="https://learn.adafruit.com/adafruit-hmc5883l-breakout-triple-axis-magnetometer-compass-sensor/" class="bbc_link" target="_blank">https://learn.adafruit.com/adafruit-hmc5883l-breakout-triple-axis-magnetometer-compass-sensor/</a></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg">
					<a id="msg2810798"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="http://forum.arduino.cc/index.php?action=profile;u=453224" title="View the profile of xmlms" class="pm_icon">xmlms</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="http://forum.arduino.cc/index.php?action=profile;u=453224"><img class="avatar" src="./Abnormal Raw Data from HMC5883L_files/default.png" alt="avatar_xmlms" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Abnormal Raw Data from HMC5883L_files/star.gif" alt="*"></li>
								<li class="postgroup">Newbie</li>
								<li class="postcount">Posts: 10</li>
								<li class="custom karma">Karma: 3&nbsp;&nbsp;<a href="http://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=453224;de75116=cc29f10e73a442e4b44a697c83f9a18d">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Abnormal Raw Data from HMC5883L_files/xx.png" alt="">
								</div>
								<div id="subject_2810798" class="subject_title"><a href="http://forum.arduino.cc/index.php?topic=408300.msg2810798#msg2810798" rel="nofollow">Re: Abnormal Raw Data from HMC5883L</a></div>
								<div class="page_number floatright">
									 #2 
								</div>
								<h5>
									<a href="http://forum.arduino.cc/index.php?topic=408300.msg2810798#msg2810798" rel="nofollow" title="Reply #2 - Re: Abnormal Raw Data from HMC5883L" class="smalltext">Jun 22, 2016, 02:39 am</a>
									<span class="smalltext modified" id="modified_2810798"></span>
								</h5>
								<div id="msg_2810798_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_2810798">Thanks for your reply Koepel.<br><br>I tried the tutorial you suggest and I also switched the input voltage from 3.3V to 5V this time.<br><br>Unfortunately it does not make any improvement, the result is still the same. I double checked the datasheet to ensure that all the data have been read from correct registers. So I reckon neither the library nor the input is the problem at this stage. <br><br>Result: <br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code" style="max-height: none; height: 200px;">HMC5883 Magnetometer Test<br><br>------------------------------------<br>Sensor:&nbsp; &nbsp; &nbsp; &nbsp;HMC5883<br>Driver Ver:&nbsp; &nbsp;1<br>Unique ID:&nbsp; &nbsp; 12345<br>Max Value:&nbsp; &nbsp; 800.00 uT<br>Min Value:&nbsp; &nbsp; -800.00 uT<br>Resolution:&nbsp; &nbsp;0.20 uT<br>------------------------------------<br><br>X: -20.64&nbsp; Y: 6.91&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 174.09<br>X: -18.82&nbsp; Y: 28.09&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 136.42<br>X: -6.36&nbsp; Y: 40.27&nbsp; Z: 0.10&nbsp; uT<br>Heading (degrees): 111.58<br>X: 16.73&nbsp; Y: 27.00&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 70.83<br>X: 17.55&nbsp; Y: 17.55&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 57.61<br>X: -3.09&nbsp; Y: 41.00&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 106.92<br>X: -12.45&nbsp; Y: 11.73&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 149.33<br>X: -3.55&nbsp; Y: 2.18&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 161.00<br>X: 14.45&nbsp; Y: 15.18&nbsp; Z: 0.10&nbsp; uT<br>Heading (degrees): 59.01<br>X: 7.45&nbsp; Y: 29.27&nbsp; Z: 0.10&nbsp; uT<br>Heading (degrees): 88.32<br>X: 10.55&nbsp; Y: 21.45&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 76.43<br>X: -3.00&nbsp; Y: 20.00&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 111.14<br>X: -1.27&nbsp; Y: 35.91&nbsp; Z: 0.00&nbsp; uT<br>Heading (degrees): 104.63<br>X: -15.27&nbsp; Y: 36.18&nbsp; Z: 0.10&nbsp; uT<br>Heading (degrees): 125.49<br>X: -29.73&nbsp; Y: 11.91&nbsp; Z: -0.10&nbsp; uT<br>Heading (degrees): 170.77<br>X: -23.91&nbsp; Y: -7.00&nbsp; Z: 0.00&nbsp; uT<br><br></code><br><br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				<div class="windowbg2">
					<a id="msg2810965"></a>
					<div class="post_wrapper">
						<div class="poster">
							<h4>
								<span class="off" title="Offline"></span>
								<a href="http://forum.arduino.cc/index.php?action=profile;u=411246" title="View the profile of Koepel" class="pm_icon">Koepel</a>
							</h4>
							<ul class="user_info">
								<li class="avatar">
									<a href="http://forum.arduino.cc/index.php?action=profile;u=411246"><img class="avatar" src="./Abnormal Raw Data from HMC5883L_files/Koepel.jpg" alt="avatar_Koepel" onerror="this.src=&#39;//dcw9y8se13llu.cloudfront.net/avatars/default.png&#39;;"></a>
								</li>
								<li class="icons"><img src="./Abnormal Raw Data from HMC5883L_files/stargold.gif" alt="*"></li>
								<li class="postgroup">Edison Member</li>
								<li class="postcount">Posts: 1,773</li>
								<li class="custom karma">Karma: 292&nbsp;&nbsp;<a href="http://forum.arduino.cc/index.php?action=karma;sa=applaud;uid=411246;de75116=cc29f10e73a442e4b44a697c83f9a18d">[add]</a></li>
							</ul>
						</div>
						<div class="postarea">
							<div class="keyinfo">
								<div class="messageicon" style="position: absolute; z-index: -1;">
									<img src="./Abnormal Raw Data from HMC5883L_files/xx.png" alt="">
								</div>
								<div id="subject_2810965" class="subject_title"><a href="http://forum.arduino.cc/index.php?topic=408300.msg2810965#msg2810965" rel="nofollow">Re: Abnormal Raw Data from HMC5883L</a></div>
								<div class="page_number floatright">
									 #3 
								</div>
								<h5>
									<a href="http://forum.arduino.cc/index.php?topic=408300.msg2810965#msg2810965" rel="nofollow" title="Reply #3 - Re: Abnormal Raw Data from HMC5883L" class="smalltext">Jun 22, 2016, 07:28 am</a>
									<span class="smalltext modified" id="modified_2810965"><span class="lastedit">Last Edit</span>: Jun 22, 2016, 07:34 am by Koepel</span>
								</h5>
								<div id="msg_2810965_quick_mod"></div>
							</div>
							<div class="post">
								<div class="inner" id="msg_2810965">After searching online, there are sometimes bad HMC5883L chips, and the Z-axis seems to have more problems than the X-axis and Y-axis.<br><br>Try to return the faulty HMC5883L and get a new one.<br><br>Good sellers ( Adafruit or Sparkfun ) sell good components. They also give schematics and example code and they have a forum.<br>On the other hand, if you are going to buy a cheap module, then buy the cheapest there is. The Jaycar/duinotech module costs 9.95 dollars, but they are 2.15 dollars on AliExpress (that is 2.15 dollars for a single module inclusive shipping). A real compass is 42 cents on AliExpress, which can be used to compare to the HMC5883L.<br><br>Once you have a working HMC5883L, you need to calibrate it.<br></div>
							</div>
							<div class="under_message">
							</div>
						</div>
						<div class="moderatorbar">
						</div>
					</div>
				</div>
				<hr class="post_separator">
				</form>
			</div>
			<div class="pagesection">
				
		<div class="buttonlist floatright">
			
				<a class="button-forum  button_strip_print" href="http://forum.arduino.cc/index.php?action=printpage;topic=408300.0" rel="nofollow">Print</a>
		</div>
				 <a href="http://forum.arduino.cc/index.php?topic=408300.0#main_content_section" class="topbottom floatleft" id="bot">Go Up</a>
				<div class="pagelinks floatleft">
					<span class="pages">Pages: </span><span class="current_page">[1]</span> 
				</div>
			</div>
			<div id="moderationbuttons">
				
			</div>
			<div id="display_jump_to"><label class="smalltext" for="display_jump_to_select">Jump to:</label> <select name="display_jump_to_select" id="display_jump_to_select" onfocus="grabJumpToContent(this);"><option value="?board=10.0">=&gt; Sensors</option></select>&nbsp;<input type="button" class="button_submit" value="Go" onclick="window.location.href = &#39;http://forum.arduino.cc/index.php?board=10.0&#39;;"></div>
			<br class="clear">
				<script><!-- // --><![CDATA[
					var oQuickReply = new QuickReply({
						bDefaultCollapsed: false,
						iTopicId: 408300,
						iStart: 0,
						sScriptUrl: smf_scripturl,
						sImagesUrl: smf_images_url,
						sContainerId: "quickReplyOptions",
						sImageId: "quickReplyExpand",
						sClassCollapsed: "toggle_up",
						sClassExpanded: "toggle_down",
						bIsFull: true
					});
					if ('XMLHttpRequest' in window)
					{
						var oQuickModify = new QuickModify({
							sScriptUrl: smf_scripturl,
							sClassName: 'quick_edit',
							bShowModify: true,
							iTopicId: 408300,
							sTemplateBodyEdit: '\n\t\t\t\t\t\t\t\t<div id="quick_edit_body_container">\n\t\t\t\t\t\t\t\t\t<div id="error_box" class="error"><' + '/div>\n\t\t\t\t\t\t\t\t\t<textarea class="editor" name="message" rows="12" style="width: 100%; margin-bottom: 10px;" tabindex="1">%body%<' + '/textarea><br>\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="de75116" value="cc29f10e73a442e4b44a697c83f9a18d">\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="topic" value="408300">\n\t\t\t\t\t\t\t\t\t<input type="hidden" name="msg" value="%msg_id%">\n\t\t\t\t\t\t\t\t\t<div class="righttext">\n\t\t\t\t\t\t\t\t\t\t<input type="submit" name="post" value="Save" tabindex="2" onclick="return oQuickModify.modifySave(\'cc29f10e73a442e4b44a697c83f9a18d\', \'de75116\');" accesskey="s" class="button_submit">&nbsp;&nbsp;<input type="submit" name="cancel" value="Cancel" tabindex="3" onclick="return oQuickModify.modifyCancel();" class="button_submit">\n\t\t\t\t\t\t\t\t\t<' + '/div>\n\t\t\t\t\t\t\t\t<' + '/div>',
							sTemplateSubjectEdit: '<input type="text" name="subject" value="%subject%" size="80" maxlength="80" tabindex="4" class="input_text">',
							sTemplateBodyNormal: '%body%',
							sTemplateSubjectNormal: '<a hr'+'ef="' + smf_scripturl + '?topic=408300.msg%msg_id%#msg%msg_id%" rel="nofollow">%subject%<' + '/a>',
							sTemplateTopSubject: 'Topic: %subject% &nbsp;(Read 92 times)',
							sTemplateReasonEdit: '<input type="text" name="modify_reason" value="%modify_reason%" size="80" maxlength="80" tabindex="5" class="input_text">)',
							sTemplateReasonNormal: '%modify_text',
							sErrorBorderStyle: '1px solid red'
						});

						aJumpTo[aJumpTo.length] = new JumpTo({
							sContainerId: "display_jump_to",
							sJumpToTemplate: "<label class=\"smalltext\" for=\"%select_id%\">Jump to:<" + "/label> %dropdown_list%",
							iCurBoardId: 10,
							iCurBoardChildLevel: 0,
							sCurBoardName: "Sensors",
							sBoardChildLevelIndicator: "==",
							sBoardPrefix: "=> ",
							sCatSeparator: "-----------------------------",
							sCatPrefix: "",
							sGoButtonLabel: "Go"
						});

						aIconLists[aIconLists.length] = new IconList({
							sBackReference: "aIconLists[" + aIconLists.length + "]",
							sIconIdPrefix: "msg_icon_",
							sScriptUrl: smf_scripturl,
							bShowModify: true,
							iBoardId: 10,
							iTopicId: 408300,
							sSessionId: smf_session_id,
							sSessionVar: smf_session_var,
							sLabelIconList: "Message icon",
							sBoxBackground: "transparent",
							sBoxBackgroundHover: "#ffffff",
							iBoxBorderWidthHover: 1,
							sBoxBorderColorHover: "#adadad" ,
							sContainerBackground: "#ffffff",
							sContainerBorder: "1px solid #adadad",
							sItemBorder: "1px solid #ffffff",
							sItemBorderHover: "1px dotted gray",
							sItemBackground: "transparent",
							sItemBackgroundHover: "#e0e0f0"
						});
					}
				// ]]></script>
			</div>
		</div>
	</div>
  </div>
</div>
           <br><style>.pagefooter a { color: white !important; }</style>
	<script type="text/javascript">

		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-22581631-3']);
		_gaq.push(['_setDomainName', 'arduino.cc']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();

	</script><link rel="stylesheet" type="text/css" href="./Abnormal Raw Data from HMC5883L_files/newsletter.css">
<div id="newsletterModal" class="reveal-modal small">
  <form action="http://www.arduino.cc/subscribe.php" method="post" name="sendy-subscribe-form" id="sendy-subscribe-form" class="form-popup">
    <div class="modalHeader">
      <h3 style="line-height: 1.8rem;" class="modal-header-alt">This link has expired. <br>Please re-subscribe to our Newsletters.</h3>
      <h3 class="modal-header-main">Subscribe to our Newsletters</h3>
    </div>
    <div class="modalBody" id="newsletterModalBody">
        <div id="newsletterEmailField" class="row" style="padding-left: 0">
          <div class="large-2 columns">
            <label for="email" class="newsletter-form-label inline">Email</label>
          </div>
          <div class="large-10 columns" style="padding-left: 0">
            <input placeholder="Enter your email address" type="email" name="email" class="subscribe-form-input">
            <p id="emailMissing" class="newsletterPopupError">Please enter a valid email to subscribe</p>
          </div>
        </div>
        <div style="margin-left:20px">
          <div style="margin-bottom:0.3em">
            <input style="display:none" type="checkbox" checked="" name="list[]" value="arduino_newsletter_id" id="worldwide" class="newsletter-form-checkbox">
            <label for="worldwide"></label>
            <div style="display:inline-block" class="newsletter-form-label">Arduino Newsletter</div>
          </div>
          <div style="margin-bottom:0.3em">
            <input style="display:none" type="checkbox" checked="" name="list[]" value="arduino_store_newsletter_id" id="store" class="newsletter-form-checkbox">
            <label for="store"></label>
            <div style="display:inline-block" class="newsletter-form-label">Arduino Store Newsletter</div>
          </div>
          <div>
            <input style="display:none" type="checkbox" name="list[]" value="arduino_italians_newsletter_id" id="italians" class="newsletter-form-checkbox">
            <label for="italians"></label>
            <div style="display:inline-block" class="newsletter-form-label">Newsletter Italiana</div>
          </div>
        </div>
        <div>
          <p class="newsletterPopupError2" id="newsletterSubscribeStatus"></p>
        </div>
    </div>
    <div class="row modalFooter">
      <div class="form-buttons-row">
        
          <button type="button" value="Cancel" class="popup-form-button white cancel-modal close-reveal-modal">Cancel</button>
          <button type="submit" name="Subscribe" id="subscribe-submit-btn" class="popup-form-button">Next</button>
        
      </div>
    </div>
  </form>

  <!-- step 2, confirm popup -->
  <div class="confirm-popup" style="margin-bottom:1em">
    <div class="modalHeader">
      <h3>Confirm your email address</h3>
    </div>
    <div class="modalBody" id="newsletterModalBody" style="padding-right:1em;margin-bottom:0">
        <p style="margin-bottom:1em;font-size:15px">
          We need to confirm your email address.<br>
          To complete the subscription, please click the link in the
          email we just sent you.
        </p>
        <p style="margin-bottom:1em;font-size:15px">
          Thank you for subscribing!
        </p>
        <p style="margin-bottom:1em;font-size:15px">
          Arduino<br>
          via Egeo 16<br>
          Torino, 10131<br>
          Italy<br>
        </p>
    </div>
    <div class="row modalFooter">
      <div class="form-buttons-row">
        
          <button name="Ok" class="popup-form-button" id="close-confirm-popup">Ok</button>

      </div>
    </div>
  </div>

</div>
<script type="application/javascript">
    $(document).ready(function() {
    
    function validateEmail(email) { 
        var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return re.test(email);
    } 

    var openPopup = function() {

      $('.confirm-popup').hide();
      $('.form-popup').show();

      var modalBody = $('#newsletterModalBody');
      var emailInput = modalBody.find('#newsletterEmailField').find('input');
      var subscribeButton = $('#subscribe-submit-btn');
      var emailMissingP = modalBody.find('#emailMissing');
      var formValid = false;
      var confirmHtml = $('#newsletterModalConfirm').html();
      var email = $('#sendy-EMAIL').val(); 

      //reset popup values / appearance
      $("#newsletterSubscribeStatus").hide();
      $('#newsletterModal').find('.modal-header-main').show();
      $('#newsletterModal').find('.modal-header-alt').hide();
      emailMissingP.hide();
      emailInput.val('');
      modalBody.find('#store').prop('checked', true);
      modalBody.find('#worldwide').prop('checked', true);

      //both checkboxes checked at beginning 
       
      subscribeButton.removeAttr('disabled');

      //If user didn't provide email by footer input box, show input box in the popup, else just checkboxes
      if(validateEmail(email)) {
        emailInput.val(email); 
        formValid = true;
      } else {
        emailMissingP.show();  
        subscribeButton.attr('disabled', 'disabled');
        $('#sendy-EMAIL').val('');
        formValid = false;
      }

      $('#newsletterModal').foundation('reveal', 'open');

      emailInput.on('input propertychange paste', function(e) {
           if(!validateEmail(emailInput.val())) {
              emailMissingP.show();
              subscribeButton.attr('disabled', 'disabled');
              formValid = false;
           } else {
              formValid = true;
              emailMissingP.hide();
              subscribeButton.removeAttr('disabled');
           }     
      });
    };

    $('#sendy-EMAIL').on('keypress', function(e) {
      if(e.keyCode == 13) {
        openPopup();
      }
    });

    $('#sendy-subscribe').on('click', function() {
      openPopup();
    });
  
    $("#sendy-subscribe-form").on('keypress', function(e) {
        if(e.keyCode == 13 && formValid) {
          e.preventDefault(); 
          $(this).submit();
        }
    });

    $('#subscribe-submit-btn').on('click', function(e){
      e.preventDefault(); 
      // disable 'NEXT' button to avoid multiple submits
      $('#subscribe-submit-btn').attr('disabled', 'disabled');
      $("#sendy-subscribe-form").submit();
    });

    $('#close-confirm-popup').on('click', function(e){
      $('#newsletterModal').foundation('reveal', 'close');  
    });

    // trigger click on checkbox when clicking text label
    $('.newsletter-form-label').on('click', function(e){
      $(this).siblings("label").click();
    });

    $("#sendy-subscribe-form").on('submit', function(e){
      e.preventDefault(); 
      
      var $form = $(this),
      //name = $form.find('input[name="name"]').val(),
      email = $form.find('input[name="email"]').val(),
      lists = $form.find('input[name="list[]"]:checked'),
      url = $form.attr('action');
      
      //reset
      $("#newsletterSubscribeStatus").hide(); 

      if(!lists.length) {
        $("#newsletterSubscribeStatus").html("Please select at least <br> one newsletter.");
        $("#newsletterSubscribeStatus").show(); 
        //button 'NEXT' can be enabled
        $('#subscribe-submit-btn').removeAttr('disabled');
        return;
      }

      var listValues = [];
      for(var i=0; i<lists.length; i++) {
        listValues.push($(lists[i]).val());
      }

      $.post(url, {lists:listValues, email:email},
        function(data) {
            if(data)
            {
              if(data=="All fields are required.")
              {
                $("#newsletterSubscribeStatus").text("Please fill in your email.");
                $("#newsletterSubscribeStatus").show(); 
              }
              else if(data=="Invalid email address.")
              {
                $("#newsletterSubscribeStatus").text("Your email address is invalid.");
                $("#newsletterSubscribeStatus").show(); 
              }
              // else if(data=="Invalid list ID.")
              // {
              //   $("#newsletterSubscribeStatus").text("Your list ID is invalid.");
              //   $("#newsletterSubscribeStatus").show(); 
              // }
              else if(data=="Already subscribed.")
              {
                $("#newsletterSubscribeStatus").text("You're already subscribed!");
                $("#newsletterSubscribeStatus").show(); 
              }
              else if(data=="No list selected.")
              {
                $("#newsletterSubscribeStatus").text("Please select at least <br> one newsletter.");
                $("#newsletterSubscribeStatus").show(); 
              }
              else
              {
                //$("#newsletterSubscribeStatus").text("You're subscribed!");
                //change popup
                $('.form-popup').hide();
                $('.confirm-popup').show();
                
              }
            }
            else
            {
              alert("Sorry, unable to subscribe. Please try again later!");
            }
          //button 'NEXT' can be enabled now
          $('#subscribe-submit-btn').removeAttr('disabled');
        }
      );
    
    });

  });
  </script>
<div id="pagefooter" class="pagefooter">
  <div class="row">
    <div class="large-8 eight columns">
      <div class="large-4 four columns newsletter-box">
       <!-- Begin Sendy Signup Form -->
       <h6>Newsletter</h6>
        <div>
          <input type="email" name="email" class="email" id="sendy-EMAIL" placeholder="Enter your email to sign up">
          <i class="icon-right-small"></i>
          <input value="Subscribe" name="subscribe" id="sendy-subscribe" class="newsletter-button">
        </div>
       <!--End sendy_embed_signup-->
      </div>
      <div style="clear:both;"></div>
      <ul class="inline-list">
        <li class="monospace">Â©2016 Arduino</li>
        <li><a href="https://www.arduino.cc/en/Main/CopyrightNotice">Copyright Notice</a></li>
        <li><a href="https://www.arduino.cc/en/Main/ContactUs">Contact us</a></li>
      </ul>
    </div>
    <div class="large-4 four columns">
      <ul id="arduinoSocialLinks" class="arduino-social-links">
        <li>
          <a href="https://twitter.com/arduino">
            <img src="./Abnormal Raw Data from HMC5883L_files/twitter.png">
          </a>
        </li>
        <li>
          <a href="http://www.facebook.com/official.arduino">
            <img src="./Abnormal Raw Data from HMC5883L_files/facebook.png">
          </a>
        </li>
        <li>
          <a href="https://plus.google.com/+Arduino">
            <img src="./Abnormal Raw Data from HMC5883L_files/gplus.png">
          </a>
        </li>
        <li>
          <a href="http://www.flickr.com/photos/arduino_cc">
            <img src="./Abnormal Raw Data from HMC5883L_files/flickr.png">
          </a>
        </li>
        <li>
          <a href="http://youtube.com/arduinoteam">
            <img src="./Abnormal Raw Data from HMC5883L_files/youtube.png">
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

  <div id="ajax_in_progress" style="display: none;">Loading...</div>
<script><!-- // --><![CDATA[
	function triggerCron() {
		var tempImage = new Image();
		tempImage.src = 'http://forum.arduino.cc' + "/cron.php?ts=1470260310";
	}
	window.setTimeout(triggerCron, 1);
// ]]></script>
    <script src="./Abnormal Raw Data from HMC5883L_files/modernizr.js"></script>
    <!--[if gte IE 9]><!-->
    <script src="./Abnormal Raw Data from HMC5883L_files/foundation.min.js"></script>
    <script src="./Abnormal Raw Data from HMC5883L_files/foundation.topbar.custom.js"></script>
    <script>
      $(document).foundation();
    </script>
    <!--<![endif]-->
    <!--[if IE 8]>
    <script src="https://www.arduino.cc/js/foundation_ie8.min.js"></script>
    <script src="https://www.arduino.cc/js/ie8/jquery.foundation.alerts.js"></script>
    <script src="https://www.arduino.cc/js/app.js"></script>
    <![endif]-->

</body></html>